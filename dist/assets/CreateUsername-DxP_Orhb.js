import{j as k,l as V,e as c,g as w,d as v,a as o,w as C,m as y,r as l,o as B,u as g,n as E}from"./index-CXDzGQ2b.js";import{u as q,r as A,m as L}from"./index-D4thpUCn.js";const M={class:"grid content-center h-full w-full"},N=v("h2",{class:"my-2 text-center"},"Create Unique Username",-1),I={__name:"CreateUsername",setup(S){const _=E(),t=k(),n=V({username:t.app.user.username}),u=c(""),i=c(""),m=c(!1),x={username:{required:A,minLengthValue:L(1)}},r=q(x,n);async function d(){let s=await t.verifyUsername(n.username);console.log(s),s?(m.value=!1,i.value="Username is available"):(i.value="Username is taken",m.value=!0)}function f(){if(r.value.$silentErrors.length>0){let s=r.value.$silentErrors[0].$message;console.log(s),s&&(u.value=s)}else u.value=""}function p(){const s=t.app.user.uid;t.updateUsername(s,n.username),_.push("/home")}return(s,e)=>{const b=l("v-img"),U=l("v-text-field"),h=l("v-btn"),$=l("v-form");return B(),w("div",M,[v("div",null,[o(b,{src:"../assets/img/icon-black.svg",class:"w-20 h-20 mx-auto rounded-2xl bg-red-500 border","aspect-ratio":"1"})]),N,v("div",null,[o($,{onSubmit:e[4]||(e[4]=y(a=>p(),["prevent"])),class:"flex flex-col mx-4 gap-4"},{default:C(()=>[o(U,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=a=>n.username=a),label:"Choose Username","error-messages":u.value,messages:i.value,maxlength:"15",counter:"",onBlur:e[1]||(e[1]=a=>(f(),d(),g(r).username.$touch)),onInput:e[2]||(e[2]=a=>(f(),d(),g(r).username.$touch))},null,8,["modelValue","error-messages","messages"]),o(h,{class:"mt-2",color:"indigo-darken-1",block:"",text:"Finish",onClick:e[3]||(e[3]=a=>p()),disabled:m.value},null,8,["disabled"])]),_:1})])])}}};export{I as default};
